"use strict";const inputEl=document.querySelector("#show"),buttonEl=document.querySelector(".button"),resultList=document.querySelector(".result-list"),favoriteListUl=document.querySelector(".favorite-list");let favoriteShowsArray=[];function searchHandler(){cleanList();const e=inputEl.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){const t=e;for(let e=0;e<t.length;e++){const r=t[e].show.name,o=document.createElement("li");o.classList.add("show-result");const a=document.createElement("h3"),n=document.createTextNode(r),s=document.createElement("img");if(resultList.appendChild(o),o.appendChild(a),a.appendChild(n),o.appendChild(s),o.addEventListener("click",addToFavoritesList),t[e].show.image){const r=t[e].show.image.medium;s.src=r}else s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"}})}function cleanList(){resultList.innerHTML&&(resultList.innerHTML="")}function createList(e,t){const r=document.createElement("li");r.classList.add("favorite-item");const o=document.createElement("h3");o.classList.add("favorite-item__title");const a=document.createElement("img");a.classList.add("favorite-item__img"),favoriteListUl.appendChild(r),r.appendChild(a),r.appendChild(o),a.src=e,o.innerHTML=t}function addToFavoritesList(e){const t={};t.name=e.currentTarget.children[0].innerHTML,t.imgUrl=e.currentTarget.children[1].src,console.log(favoriteShowsArray.includes(t.name)),e.currentTarget.classList.contains("show-result--favorite")||(e.currentTarget.classList.add("show-result--favorite"),favoriteShowsArray.push(t),saveToLocalStorage(),createList(t.imgUrl,t.name))}function saveToLocalStorage(){localStorage.setItem("favoriteShowsArray",JSON.stringify(favoriteShowsArray))}function reloadFavorites(){if(0!==localStorage.length){const e=JSON.parse(localStorage.getItem("favoriteShowsArray"));for(let t=0;t<e.length;t++){createList(e[t].imgUrl,e[t].name);const r={};r.name=e[t].name,r.imgUrl=e[t].imgUrl,favoriteShowsArray.push(r)}}}reloadFavorites(),console.log(favoriteShowsArray),buttonEl.addEventListener("click",searchHandler);